<script>
	
	function addChild(){
		var table=document.getElementById('tblChildren');
		var rowCount=table.rows.length;
		var row=table.insertRow(rowCount);
		
		//childname
		var cell = row.insertCell(0);
		var element = document.createElement("input");
		element.type = "text";
		element.id="EmpChildren_ChildName";
		element.name = "EmpChildren["+(rowCount-1)+"][ChildName]";
		element.size = "5";
		cell.appendChild(element);
		
		//bday
		var cell = row.insertCell(1);
		var element = document.createElement("input");
		element.type = "text";
		element.id="EmpChildren_BirthDate";
		element.name = "EmpChildren["+(rowCount-1)+"][BirthDate]";
		element.size = "5";
		cell.appendChild(element);
	}
	
</script>

<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
	'id'=>'emp-children-form',
	'enableAjaxValidation'=>false,
)); ?>

	<p class="note">Fields with <span class="required">*</span> are required.</p>

	<?php echo $form->errorSummary($model); ?>
	<!-- Original crud generated by gii
	<div class="row">
		<?php echo $form->labelEx($model,'EmpID'); ?>
		<?php echo $form->textField($model,'EmpID'); ?>
		<?php echo $form->error($model,'EmpID'); ?>
	</div>

	<div class="row">
		<?php echo $form->labelEx($model,'ChildName'); ?>
		<?php echo $form->textField($model,'ChildName',array('size'=>60,'maxlength'=>100)); ?>
		<?php echo $form->error($model,'ChildName'); ?>
	</div>

	<div class="row">
		<?php echo $form->labelEx($model,'BirthDate'); ?>
		<?php echo $form->textField($model,'BirthDate',array('size'=>50,'maxlength'=>50)); ?>
		<?php echo $form->error($model,'BirthDate'); ?>
	</div>
	-->
	
	<!-- Children Tbl -->
	<div class="row">
		<?php echo $form->labelEx($model,'EmpID'); ?>
		<?php echo $form->textField($model,'EmpID'); ?>
		<?php echo $form->error($model,'EmpID'); ?>
	</div>
	
	<div class="row">
		<?=$items_error?>
		<table id="tblChildren">
			<thead>
				<tr>
					<td>Name</td>
					<td>Bday</td>
				</tr>
			</thead>
			<tbody>
				<?php
					$i=0;
					foreach($items_purchase as $row){
						echo "<tr>";
						echo "<td><input size='5' type='text' name='EmpChildren[$i][ChildName]' value='".$row['ChildName']."'></td>";
						echo "<td><input maxlength='100' size='50' type='text' name='EmpChildren[$i][BirthDate]' value='".$row['BirthDate']."'></td>";
						echo "</tr>";
						$i++;						
					}
				?>	
			</tbody>
		</table>
	</div>
	
	<p><input type="button" value="Add Item" onclick="addChild()" /></p>
	<!--
	<div class="row buttons">
		<?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
	</div>
	-->
<?php $this->endWidget(); ?>

</div><!-- form -->